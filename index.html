<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-audio-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych/plugins/jspsych-vwp-click.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/underscore@1.11.0/underscore-min.js"></script>
    <script src="verb_bias_stim.js"></script>
    <link href="jspsych/css/jspsych.css" rel="stylesheet">
    <style>
    .fixation{position: relative; width: 200px; height: 100px; border: 2px solid black;}
    .fixation span {width: 200px; text-align: center; left: 0px;}
    .top{position: absolute; top: 0px;}
    .bottom{position: absolute; bottom: 0px;}
    .topleft{position: absolute; top: 10px; left: 10px; width: 48%; height: 47%; border: 2px solid black;outline-style: solid;
  outline-color: black;}
    .topright{position: absolute; top: 10px; right: 10px; width: 48%; height: 47%; border: 2px solid black;outline-style: solid;
  outline-color: black;}
    .bottomleft{position: absolute; bottom: 10px;left: 10px; width: 48%; height: 47%; border: 2px solid black;outline-style: solid;
  outline-color: black;}
    .bottomright{position: absolute; bottom: 10px; right: 10px; width: 48%; height: 47%; border: 2px solid black;outline-style: solid;
  outline-color: black;}
  .imgTL{position: absolute; top: 10px; left: 10px; }
  .imgTR{position: absolute; top: 10px; right: 10px; }
  .imgBL{position: absolute; bottom: 10px; left: 10px; }
  .imgBR{position: absolute; bottom: 10px; right: 10px; }

    </style>
  </head>

  <body>

  </body>
  <script>

    var hello = {
      type: 'html-keyboard-response',
      stimulus: 'Hello.'
    }

    var timeline = [];

    timeline.push(hello);

    var trial1 = {
        type: 'html-button-response',
        stimulus: '<p>Running</p>',
        choices: ['Healthy', 'Unhealthy'],
        prompt: "<p>Is this activity healthy or unhealthy?</p>"
    };

    timeline.push(trial1);

    var sound = {
    type: 'audio-keyboard-response',
    stimulus: 'sounds/speech_green.mp3',
    choices: ['e', 'i'],
    prompt: "<p>Is the pitch high or low? Press 'e' for low and 'i' for high.</p>",
    response_ends_trial: true
    };

    timeline.push(sound);

    var vwp_timeline =[];

    var vwp_stimulus = {
      type: 'vwp-click',
      pic1: function(){ return jsPsych.timelineVariable('pic1', true)},
      pic2: function(){ return jsPsych.timelineVariable('pic2', true)},
      pic3: function(){ return jsPsych.timelineVariable('pic3', true)},
      pic4: function(){ return jsPsych.timelineVariable('pic4', true)},
      audio_stim: function(){ return jsPsych.timelineVariable('audio_stim', true)},
      delay: 1000,
      data: {
        trialID: jsPsych.timelineVariable('trialID'),
        phase: 'test-vwp'
      },
      choices: ["z"]
    }

    vwp_timeline.push(vwp_stimulus);

    var vwp_trials = [
      {pic1: 'pics/bird_mitten.png', pic2: 'pics/bunny_feather.png', pic3: 'pics/bear_candle.png', pic4: 'pics/fish.png', audio_stim: 'sounds/speech_green.mp3', trialID: 1},
      {pic1: 'pics/duckling.png', pic2: 'pics/cow.png', pic3: 'pics/fan.png', pic4: 'pics/dog.png', audio_stim: 'sounds/speech_green.mp3', trialID: 2}
    ]

    var vwp_proc = {
      timeline: vwp_timeline,
      timeline_variables: vwp_trials,
      randomize_order: true,
      repetitions: 1 //other options = sample, with or without replacement, etc.
    }

    timeline.push(vwp_proc);


    var gbye = {
      type: 'html-keyboard-response',
      stimulus: "You're done."
    }


    timeline.push(gbye);

          // an array of paths to images that need to be loaded
      var images = ['pics/bird_mitten.png'];
      var audio = ['sounds/speech_green.mp3'];



    jsPsych.init({
      timeline: timeline,
      preload_audio: audio,
      preload_images: images,
      use_webaudio: false,
      on_finish: function() {
    jsPsych.data.displayData();
  }
    })

  </script>
</html>
